var ResLoader=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t){e.exports=PIXI},function(e,t,r){e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(e,t){var r=e[0],n=e[1],i=e[2],a=e[3];r+=(n&i|~n&a)+t[0]-680876936|0,a+=((r=(r<<7|r>>>25)+n|0)&n|~r&i)+t[1]-389564586|0,i+=((a=(a<<12|a>>>20)+r|0)&r|~a&n)+t[2]+606105819|0,n+=((i=(i<<17|i>>>15)+a|0)&a|~i&r)+t[3]-1044525330|0,r+=((n=(n<<22|n>>>10)+i|0)&i|~n&a)+t[4]-176418897|0,a+=((r=(r<<7|r>>>25)+n|0)&n|~r&i)+t[5]+1200080426|0,i+=((a=(a<<12|a>>>20)+r|0)&r|~a&n)+t[6]-1473231341|0,n+=((i=(i<<17|i>>>15)+a|0)&a|~i&r)+t[7]-45705983|0,r+=((n=(n<<22|n>>>10)+i|0)&i|~n&a)+t[8]+1770035416|0,a+=((r=(r<<7|r>>>25)+n|0)&n|~r&i)+t[9]-1958414417|0,i+=((a=(a<<12|a>>>20)+r|0)&r|~a&n)+t[10]-42063|0,n+=((i=(i<<17|i>>>15)+a|0)&a|~i&r)+t[11]-1990404162|0,r+=((n=(n<<22|n>>>10)+i|0)&i|~n&a)+t[12]+1804603682|0,a+=((r=(r<<7|r>>>25)+n|0)&n|~r&i)+t[13]-40341101|0,i+=((a=(a<<12|a>>>20)+r|0)&r|~a&n)+t[14]-1502002290|0,n+=((i=(i<<17|i>>>15)+a|0)&a|~i&r)+t[15]+1236535329|0,r+=((n=(n<<22|n>>>10)+i|0)&a|i&~a)+t[1]-165796510|0,a+=((r=(r<<5|r>>>27)+n|0)&i|n&~i)+t[6]-1069501632|0,i+=((a=(a<<9|a>>>23)+r|0)&n|r&~n)+t[11]+643717713|0,n+=((i=(i<<14|i>>>18)+a|0)&r|a&~r)+t[0]-373897302|0,r+=((n=(n<<20|n>>>12)+i|0)&a|i&~a)+t[5]-701558691|0,a+=((r=(r<<5|r>>>27)+n|0)&i|n&~i)+t[10]+38016083|0,i+=((a=(a<<9|a>>>23)+r|0)&n|r&~n)+t[15]-660478335|0,n+=((i=(i<<14|i>>>18)+a|0)&r|a&~r)+t[4]-405537848|0,r+=((n=(n<<20|n>>>12)+i|0)&a|i&~a)+t[9]+568446438|0,a+=((r=(r<<5|r>>>27)+n|0)&i|n&~i)+t[14]-1019803690|0,i+=((a=(a<<9|a>>>23)+r|0)&n|r&~n)+t[3]-187363961|0,n+=((i=(i<<14|i>>>18)+a|0)&r|a&~r)+t[8]+1163531501|0,r+=((n=(n<<20|n>>>12)+i|0)&a|i&~a)+t[13]-1444681467|0,a+=((r=(r<<5|r>>>27)+n|0)&i|n&~i)+t[2]-51403784|0,i+=((a=(a<<9|a>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0,n+=((i=(i<<14|i>>>18)+a|0)&r|a&~r)+t[12]-1926607734|0,r+=((n=(n<<20|n>>>12)+i|0)^i^a)+t[5]-378558|0,a+=((r=(r<<4|r>>>28)+n|0)^n^i)+t[8]-2022574463|0,i+=((a=(a<<11|a>>>21)+r|0)^r^n)+t[11]+1839030562|0,n+=((i=(i<<16|i>>>16)+a|0)^a^r)+t[14]-35309556|0,r+=((n=(n<<23|n>>>9)+i|0)^i^a)+t[1]-1530992060|0,a+=((r=(r<<4|r>>>28)+n|0)^n^i)+t[4]+1272893353|0,i+=((a=(a<<11|a>>>21)+r|0)^r^n)+t[7]-155497632|0,n+=((i=(i<<16|i>>>16)+a|0)^a^r)+t[10]-1094730640|0,r+=((n=(n<<23|n>>>9)+i|0)^i^a)+t[13]+681279174|0,a+=((r=(r<<4|r>>>28)+n|0)^n^i)+t[0]-358537222|0,i+=((a=(a<<11|a>>>21)+r|0)^r^n)+t[3]-722521979|0,n+=((i=(i<<16|i>>>16)+a|0)^a^r)+t[6]+76029189|0,r+=((n=(n<<23|n>>>9)+i|0)^i^a)+t[9]-640364487|0,a+=((r=(r<<4|r>>>28)+n|0)^n^i)+t[12]-421815835|0,i+=((a=(a<<11|a>>>21)+r|0)^r^n)+t[15]+530742520|0,n+=((i=(i<<16|i>>>16)+a|0)^a^r)+t[2]-995338651|0,r+=(i^((n=(n<<23|n>>>9)+i|0)|~a))+t[0]-198630844|0,a+=(n^((r=(r<<6|r>>>26)+n|0)|~i))+t[7]+1126891415|0,i+=(r^((a=(a<<10|a>>>22)+r|0)|~n))+t[14]-1416354905|0,n+=(a^((i=(i<<15|i>>>17)+a|0)|~r))+t[5]-57434055|0,r+=(i^((n=(n<<21|n>>>11)+i|0)|~a))+t[12]+1700485571|0,a+=(n^((r=(r<<6|r>>>26)+n|0)|~i))+t[3]-1894986606|0,i+=(r^((a=(a<<10|a>>>22)+r|0)|~n))+t[10]-1051523|0,n+=(a^((i=(i<<15|i>>>17)+a|0)|~r))+t[1]-2054922799|0,r+=(i^((n=(n<<21|n>>>11)+i|0)|~a))+t[8]+1873313359|0,a+=(n^((r=(r<<6|r>>>26)+n|0)|~i))+t[15]-30611744|0,i+=(r^((a=(a<<10|a>>>22)+r|0)|~n))+t[6]-1560198380|0,n+=(a^((i=(i<<15|i>>>17)+a|0)|~r))+t[13]+1309151649|0,r+=(i^((n=(n<<21|n>>>11)+i|0)|~a))+t[4]-145523070|0,a+=(n^((r=(r<<6|r>>>26)+n|0)|~i))+t[11]-1120210379|0,i+=(r^((a=(a<<10|a>>>22)+r|0)|~n))+t[2]+718787259|0,n=((n+=(a^((i=(i<<15|i>>>17)+a|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+i|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=i+e[2]|0,e[3]=a+e[3]|0}function n(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function i(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function a(e){var t,i,a,o,s,u,f=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=f;t+=64)r(c,n(e.substring(t-64,t)));for(e=e.substring(t-64),i=e.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(r(c,a),t=0;t<16;t+=1)a[t]=0;return o=(o=8*f).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(o[2],16),u=parseInt(o[1],16)||0,a[14]=s,a[15]=u,r(c,a),c}function o(e){var r,n="";for(r=0;r<4;r+=1)n+=t[e>>8*r+4&15]+t[e>>8*r&15];return n}function s(e){var t;for(t=0;t<e.length;t+=1)e[t]=o(e[t]);return e.join("")}function u(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function f(e){var t,r=[],n=e.length;for(t=0;t<n-1;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function c(){this.reset()}return s(a("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(r,n){var i,a,o,s,u=this.byteLength,f=t(r,u),c=u;return n!==e&&(c=t(n,u)),f>c?new ArrayBuffer(0):(i=c-f,a=new ArrayBuffer(i),o=new Uint8Array(a),s=new Uint8Array(this,f,i),o.set(s),a)}}(),c.prototype.append=function(e){return this.appendBinary(u(e)),this},c.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64)r(this._hash,n(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},c.prototype.end=function(e){var t,r,n=this._buff,i=n.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)a[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(a,i),r=s(this._hash),e&&(r=f(r)),this.reset(),r},c.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},c.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},c.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},c.prototype._finish=function(e,t){var n,i,a,o=t;if(e[o>>2]|=128<<(o%4<<3),o>55)for(r(this._hash,e),o=0;o<16;o+=1)e[o]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(n[2],16),a=parseInt(n[1],16)||0,e[14]=i,e[15]=a,r(this._hash,e)},c.hash=function(e,t){return c.hashBinary(u(e),t)},c.hashBinary=function(e,t){var r=s(a(e));return t?f(r):r},c.ArrayBuffer=function(){this.reset()},c.ArrayBuffer.prototype.append=function(e){var t,n,a,o,s,u=(n=this._buff.buffer,a=e,o=!0,(s=new Uint8Array(n.byteLength+a.byteLength)).set(new Uint8Array(n)),s.set(new Uint8Array(a),n.byteLength),o?s:s.buffer),f=u.length;for(this._length+=e.byteLength,t=64;t<=f;t+=64)r(this._hash,i(u.subarray(t-64,t)));return this._buff=t-64<f?new Uint8Array(u.buffer.slice(t-64)):new Uint8Array(0),this},c.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,i=n.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)a[t>>2]|=n[t]<<(t%4<<3);return this._finish(a,i),r=s(this._hash),e&&(r=f(r)),this.reset(),r},c.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.ArrayBuffer.prototype.getState=function(){var e,t=c.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},c.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var r,n=e.length,i=new ArrayBuffer(n),a=new Uint8Array(i);for(r=0;r<n;r+=1)a[r]=e.charCodeAt(r);return t?a:i}(e.buff,!0),c.prototype.setState.call(this,e)},c.ArrayBuffer.prototype.destroy=c.prototype.destroy,c.ArrayBuffer.prototype._finish=c.prototype._finish,c.ArrayBuffer.hash=function(e,t){var n=s(function(e){var t,n,a,o,s,u,f=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=f;t+=64)r(c,i(e.subarray(t-64,t)));for(e=t-64<f?e.subarray(t-64):new Uint8Array(0),n=e.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)a[t>>2]|=e[t]<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(r(c,a),t=0;t<16;t+=1)a[t]=0;return o=(o=8*f).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(o[2],16),u=parseInt(o[1],16)||0,a[14]=s,a[15]=u,r(c,a),c}(new Uint8Array(e)));return t?f(n):n},c}()},function(e,t,r){"use strict";r.r(t);var n=r(0),i=r(1),a=r.n(i);function o(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function s(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function s(e){o(a,n,i,s,u,"next",e)}function u(e){o(a,n,i,s,u,"throw",e)}s(void 0)})}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),wx.cloud.init({env:t}),this.cloudPath=r,this.localPath=wx.env.USER_DATA_PATH,this.entryFileName=n,this.fs=wx.getFileSystemManager(),this.resources=[]}var t,r,i;return t=e,(r=[{key:"_syncLocalFile",value:function(){var e=s(regeneratorRuntime.mark(function e(t,r){var n,i,o,s,u,f,c,h,l,p,y,d=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.localPath+"/"+t,i=this.cloudPath+"/"+t,o=!1;try{this.fs.accessSync(n)}catch(e){o=!0}if(o||((new a.a.ArrayBuffer).append(this.fs.readFileSync(n)).end(!1)===r?o=!1:(this.fs.unlinkSync(n),o=!0)),!o){e.next=29;break}for(s=t.split("/").slice(0,-1),u=this.localPath+"/",f=!0,c=!1,h=void 0,e.prev=11,l=s[Symbol.iterator]();!(f=(p=l.next()).done);f=!0){y=p.value,u+="/"+y;try{this.fs.accessSync(u)}catch(e){this.fs.mkdirSync(u)}}e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),c=!0,h=e.t0;case 19:e.prev=19,e.prev=20,f||null==l.return||l.return();case 22:if(e.prev=22,!c){e.next=25;break}throw h;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return e.next=29,wx.cloud.downloadFile({fileID:i}).then(function(e){d.fs.saveFileSync(e.tempFilePath,n)}).catch(console.error);case 29:case"end":return e.stop()}},e,this,[[11,15,19,27],[20,,22,26]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"sync",value:function(e){var t=this;"function"==typeof onComplete&&(this.onSyncComplete=e),wx.cloud.downloadFile({fileID:this.cloudPath+"/"+this.entryFileName,success:function(e){t.fs.saveFile({tempFilePath:e.tempFilePath,filePath:t.localPath+"/"+t.entryFileName,success:function(e){t.fs.readFile({filePath:e.savedFilePath,encoding:"utf-8",success:function(){var e=s(regeneratorRuntime.mark(function e(r){var n,i,a,o,s,u,f,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.assetList=JSON.parse(r.data),n=0,i=t.assetList.length,a=!0,o=!1,s=void 0,e.prev=6,u=t.assetList[Symbol.iterator]();case 8:if(a=(f=u.next()).done){e.next=16;break}return c=f.value,e.next=12,t._syncLocalFile(c.filename,c.md5);case 12:"function"==typeof t.onSyncProgress&&t.onSyncProgress(c.filename,++n/i);case 13:a=!0,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),o=!0,s=e.t0;case 22:e.prev=22,e.prev=23,a||null==u.return||u.return();case 25:if(e.prev=25,!o){e.next=28;break}throw s;case 28:return e.finish(25);case 29:return e.finish(22);case 30:"function"==typeof t.onSyncComplete&&t.onSyncComplete();case 31:case"end":return e.stop()}},e,this,[[6,18,22,30],[23,,25,29]])}));return function(t){return e.apply(this,arguments)}}(),fail:console.error})},fail:console.error})},fail:console.error})}},{key:"addTexture",value:function(t,r){return this.resources.push({id:t.trim().length>0?t.trim():r.trim(),file:r.trim(),type:e.RES_TYPE_TEXTURE}),this}},{key:"addSpriteSheet",value:function(t,r){return this.resources.push({id:t,file:r.trim(),type:e.RES_TYPE_SPRITE_SHEET}),this}},{key:"addFont",value:function(t,r){return this.resources.push({id:t,file:r.trim(),type:e.RES_TYPE_FONT}),this}},{key:"_getFilePath",value:function(e){var t=e;try{this.fs.accessSync(t)}catch(r){t=this.localPath+"/"+e}try{this.fs.accessSync(t)}catch(t){return"function"==typeof this.onLoadError&&this.onLoadError(e,"resource file does not found"),!1}return t}},{key:"_loadBaseTexture",value:function(){var e=s(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this._getFilePath(t))){e.next=3;break}return e.abrupt("return",new Promise(function(e){var t=wx.createImage();t.src=r,t.onload=function(){return e(new n.BaseTexture(t))}}));case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"loadTexture",value:function(){var e=s(regeneratorRuntime.mark(function e(t,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loadBaseTexture(r);case 2:if(!(i=e.sent)){e.next=6;break}return(new n.Texture).addToCache(i,t),e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"loadSpritesheet",value:function(){var e=s(regeneratorRuntime.mark(function e(t,r){var i,a,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this._getFilePath(t),a=this._loadBaseTexture(r),!i||!a){e.next=6;break}return e.next=5,new Promise(function(e){new n.Spritesheet(a,JSON.parse(o.fs.readFileSync(i,"utf-8"))).parse(e)});case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"load",value:function(){var t=s(regeneratorRuntime.mark(function t(r){var n,i,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:"function"==typeof r&&(this.onLoadComplete=r),n=this.resources.length,i=0,a=0;case 4:if(!(a<this.resources.length)){t.next=23;break}if((o=this.resources[a]).type!==e.RES_TYPE_TEXTURE){t.next=11;break}return t.next=9,this.loadTexture(o.id,o.url);case 9:t.next=19;break;case 11:if(o.type!==e.RES_TYPE_SPRITE_SHEET){t.next=16;break}return t.next=14,this.loadSpritesheet(o.id,o.url);case 14:t.next=19;break;case 16:if(o.type!==e.RES_TYPE_FONT){t.next=19;break}return t.next=19,this.loadFont(o.id,o.url);case 19:"function"==typeof this.onLoadProgress&&this.onLoadProgress(o,++i/n);case 20:a++,t.next=4;break;case 23:"function"==typeof this.onLoadComplete&&this.onLoadComplete();case 24:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}])&&u(t.prototype,r),i&&u(t,i),e}();f(c,"RES_TYPE_TEXTURE",0),f(c,"RES_TYPE_SPRITE_SHEET",1),f(c,"RES_TYPE_FONT",2);t.default=c}]);
//# sourceMappingURL=weapp-pixi-loader.js.map