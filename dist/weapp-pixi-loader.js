var ResLoader=function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e){t.exports=PIXI},function(t,e,r){t.exports=function(t){"use strict";var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(t,e){var r=t[0],n=t[1],s=t[2],i=t[3];r+=(n&s|~n&i)+e[0]-680876936|0,i+=((r=(r<<7|r>>>25)+n|0)&n|~r&s)+e[1]-389564586|0,s+=((i=(i<<12|i>>>20)+r|0)&r|~i&n)+e[2]+606105819|0,n+=((s=(s<<17|s>>>15)+i|0)&i|~s&r)+e[3]-1044525330|0,r+=((n=(n<<22|n>>>10)+s|0)&s|~n&i)+e[4]-176418897|0,i+=((r=(r<<7|r>>>25)+n|0)&n|~r&s)+e[5]+1200080426|0,s+=((i=(i<<12|i>>>20)+r|0)&r|~i&n)+e[6]-1473231341|0,n+=((s=(s<<17|s>>>15)+i|0)&i|~s&r)+e[7]-45705983|0,r+=((n=(n<<22|n>>>10)+s|0)&s|~n&i)+e[8]+1770035416|0,i+=((r=(r<<7|r>>>25)+n|0)&n|~r&s)+e[9]-1958414417|0,s+=((i=(i<<12|i>>>20)+r|0)&r|~i&n)+e[10]-42063|0,n+=((s=(s<<17|s>>>15)+i|0)&i|~s&r)+e[11]-1990404162|0,r+=((n=(n<<22|n>>>10)+s|0)&s|~n&i)+e[12]+1804603682|0,i+=((r=(r<<7|r>>>25)+n|0)&n|~r&s)+e[13]-40341101|0,s+=((i=(i<<12|i>>>20)+r|0)&r|~i&n)+e[14]-1502002290|0,n+=((s=(s<<17|s>>>15)+i|0)&i|~s&r)+e[15]+1236535329|0,r+=((n=(n<<22|n>>>10)+s|0)&i|s&~i)+e[1]-165796510|0,i+=((r=(r<<5|r>>>27)+n|0)&s|n&~s)+e[6]-1069501632|0,s+=((i=(i<<9|i>>>23)+r|0)&n|r&~n)+e[11]+643717713|0,n+=((s=(s<<14|s>>>18)+i|0)&r|i&~r)+e[0]-373897302|0,r+=((n=(n<<20|n>>>12)+s|0)&i|s&~i)+e[5]-701558691|0,i+=((r=(r<<5|r>>>27)+n|0)&s|n&~s)+e[10]+38016083|0,s+=((i=(i<<9|i>>>23)+r|0)&n|r&~n)+e[15]-660478335|0,n+=((s=(s<<14|s>>>18)+i|0)&r|i&~r)+e[4]-405537848|0,r+=((n=(n<<20|n>>>12)+s|0)&i|s&~i)+e[9]+568446438|0,i+=((r=(r<<5|r>>>27)+n|0)&s|n&~s)+e[14]-1019803690|0,s+=((i=(i<<9|i>>>23)+r|0)&n|r&~n)+e[3]-187363961|0,n+=((s=(s<<14|s>>>18)+i|0)&r|i&~r)+e[8]+1163531501|0,r+=((n=(n<<20|n>>>12)+s|0)&i|s&~i)+e[13]-1444681467|0,i+=((r=(r<<5|r>>>27)+n|0)&s|n&~s)+e[2]-51403784|0,s+=((i=(i<<9|i>>>23)+r|0)&n|r&~n)+e[7]+1735328473|0,n+=((s=(s<<14|s>>>18)+i|0)&r|i&~r)+e[12]-1926607734|0,r+=((n=(n<<20|n>>>12)+s|0)^s^i)+e[5]-378558|0,i+=((r=(r<<4|r>>>28)+n|0)^n^s)+e[8]-2022574463|0,s+=((i=(i<<11|i>>>21)+r|0)^r^n)+e[11]+1839030562|0,n+=((s=(s<<16|s>>>16)+i|0)^i^r)+e[14]-35309556|0,r+=((n=(n<<23|n>>>9)+s|0)^s^i)+e[1]-1530992060|0,i+=((r=(r<<4|r>>>28)+n|0)^n^s)+e[4]+1272893353|0,s+=((i=(i<<11|i>>>21)+r|0)^r^n)+e[7]-155497632|0,n+=((s=(s<<16|s>>>16)+i|0)^i^r)+e[10]-1094730640|0,r+=((n=(n<<23|n>>>9)+s|0)^s^i)+e[13]+681279174|0,i+=((r=(r<<4|r>>>28)+n|0)^n^s)+e[0]-358537222|0,s+=((i=(i<<11|i>>>21)+r|0)^r^n)+e[3]-722521979|0,n+=((s=(s<<16|s>>>16)+i|0)^i^r)+e[6]+76029189|0,r+=((n=(n<<23|n>>>9)+s|0)^s^i)+e[9]-640364487|0,i+=((r=(r<<4|r>>>28)+n|0)^n^s)+e[12]-421815835|0,s+=((i=(i<<11|i>>>21)+r|0)^r^n)+e[15]+530742520|0,n+=((s=(s<<16|s>>>16)+i|0)^i^r)+e[2]-995338651|0,r+=(s^((n=(n<<23|n>>>9)+s|0)|~i))+e[0]-198630844|0,i+=(n^((r=(r<<6|r>>>26)+n|0)|~s))+e[7]+1126891415|0,s+=(r^((i=(i<<10|i>>>22)+r|0)|~n))+e[14]-1416354905|0,n+=(i^((s=(s<<15|s>>>17)+i|0)|~r))+e[5]-57434055|0,r+=(s^((n=(n<<21|n>>>11)+s|0)|~i))+e[12]+1700485571|0,i+=(n^((r=(r<<6|r>>>26)+n|0)|~s))+e[3]-1894986606|0,s+=(r^((i=(i<<10|i>>>22)+r|0)|~n))+e[10]-1051523|0,n+=(i^((s=(s<<15|s>>>17)+i|0)|~r))+e[1]-2054922799|0,r+=(s^((n=(n<<21|n>>>11)+s|0)|~i))+e[8]+1873313359|0,i+=(n^((r=(r<<6|r>>>26)+n|0)|~s))+e[15]-30611744|0,s+=(r^((i=(i<<10|i>>>22)+r|0)|~n))+e[6]-1560198380|0,n+=(i^((s=(s<<15|s>>>17)+i|0)|~r))+e[13]+1309151649|0,r+=(s^((n=(n<<21|n>>>11)+s|0)|~i))+e[4]-145523070|0,i+=(n^((r=(r<<6|r>>>26)+n|0)|~s))+e[11]-1120210379|0,s+=(r^((i=(i<<10|i>>>22)+r|0)|~n))+e[2]+718787259|0,n=((n+=(i^((s=(s<<15|s>>>17)+i|0)|~r))+e[9]-343485551|0)<<21|n>>>11)+s|0,t[0]=r+t[0]|0,t[1]=n+t[1]|0,t[2]=s+t[2]|0,t[3]=i+t[3]|0}function n(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}function s(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return r}function i(t){var e,s,i,o,a,h,f=t.length,u=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=f;e+=64)r(u,n(t.substring(e-64,e)));for(t=t.substring(e-64),s=t.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<s;e+=1)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(r(u,i),e=0;e<16;e+=1)i[e]=0;return o=(o=8*f).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),h=parseInt(o[1],16)||0,i[14]=a,i[15]=h,r(u,i),u}function o(t){var r,n="";for(r=0;r<4;r+=1)n+=e[t>>8*r+4&15]+e[t>>8*r&15];return n}function a(t){var e;for(e=0;e<t.length;e+=1)t[e]=o(t[e]);return t.join("")}function h(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function f(t){var e,r=[],n=t.length;for(e=0;e<n-1;e+=2)r.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,r)}function u(){this.reset()}return a(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(r,n){var s,i,o,a,h=this.byteLength,f=e(r,h),u=h;return n!==t&&(u=e(n,h)),f>u?new ArrayBuffer(0):(s=u-f,i=new ArrayBuffer(s),o=new Uint8Array(i),a=new Uint8Array(this,f,s),o.set(a),i)}}(),u.prototype.append=function(t){return this.appendBinary(h(t)),this},u.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,s=this._buff.length;for(e=64;e<=s;e+=64)r(this._hash,n(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},u.prototype.end=function(t){var e,r,n=this._buff,s=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<s;e+=1)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);return this._finish(i,s),r=a(this._hash),t&&(r=f(r)),this.reset(),r},u.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},u.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},u.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},u.prototype._finish=function(t,e){var n,s,i,o=e;if(t[o>>2]|=128<<(o%4<<3),o>55)for(r(this._hash,t),o=0;o<16;o+=1)t[o]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(n[2],16),i=parseInt(n[1],16)||0,t[14]=s,t[15]=i,r(this._hash,t)},u.hash=function(t,e){return u.hashBinary(h(t),e)},u.hashBinary=function(t,e){var r=a(i(t));return e?f(r):r},u.ArrayBuffer=function(){this.reset()},u.ArrayBuffer.prototype.append=function(t){var e,n,i,o,a,h=(n=this._buff.buffer,i=t,o=!0,(a=new Uint8Array(n.byteLength+i.byteLength)).set(new Uint8Array(n)),a.set(new Uint8Array(i),n.byteLength),o?a:a.buffer),f=h.length;for(this._length+=t.byteLength,e=64;e<=f;e+=64)r(this._hash,s(h.subarray(e-64,e)));return this._buff=e-64<f?new Uint8Array(h.buffer.slice(e-64)):new Uint8Array(0),this},u.ArrayBuffer.prototype.end=function(t){var e,r,n=this._buff,s=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<s;e+=1)i[e>>2]|=n[e]<<(e%4<<3);return this._finish(i,s),r=a(this._hash),t&&(r=f(r)),this.reset(),r},u.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.ArrayBuffer.prototype.getState=function(){var t,e=u.prototype.getState.call(this);return e.buff=(t=e.buff,String.fromCharCode.apply(null,new Uint8Array(t))),e},u.ArrayBuffer.prototype.setState=function(t){return t.buff=function(t,e){var r,n=t.length,s=new ArrayBuffer(n),i=new Uint8Array(s);for(r=0;r<n;r+=1)i[r]=t.charCodeAt(r);return e?i:s}(t.buff,!0),u.prototype.setState.call(this,t)},u.ArrayBuffer.prototype.destroy=u.prototype.destroy,u.ArrayBuffer.prototype._finish=u.prototype._finish,u.ArrayBuffer.hash=function(t,e){var n=a(function(t){var e,n,i,o,a,h,f=t.length,u=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=f;e+=64)r(u,s(t.subarray(e-64,e)));for(t=e-64<f?t.subarray(e-64):new Uint8Array(0),n=t.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<n;e+=1)i[e>>2]|=t[e]<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(r(u,i),e=0;e<16;e+=1)i[e]=0;return o=(o=8*f).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),h=parseInt(o[1],16)||0,i[14]=a,i[15]=h,r(u,i),u}(new Uint8Array(t)));return e?f(n):n},u}()},function(t,e,r){"use strict";r.r(e);var n=r(0),s=r(1),i=r.n(s);function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class a{constructor(t,e,r){wx.cloud.init({env:t}),this.cloudPath=e,this.localPath=wx.env.USER_DATA_PATH,this.entryFileName=r,this.fs=wx.getFileSystemManager(),this.resources=[]}async _syncLocalFile(t,e){const r=this.localPath+"/"+t,n=this.cloudPath+"/"+t;let s=!1;try{this.fs.accessSync(r)}catch(t){s=!0}if(s||((new i.a.ArrayBuffer).append(this.fs.readFileSync(r)).end(!1)===e?s=!1:(this.fs.unlinkSync(r),s=!0)),s){const e=t.split("/").slice(0,-1);let s=this.localPath+"/";for(const t of e){s+="/"+t;try{this.fs.accessSync(s)}catch(t){this.fs.mkdirSync(s)}}await wx.cloud.downloadFile({fileID:n}).then(t=>{this.fs.saveFileSync(t.tempFilePath,r)}).catch(console.error)}}sync(t){"function"==typeof onComplete&&(this.onSyncComplete=t),wx.cloud.downloadFile({fileID:this.cloudPath+"/"+this.entryFileName,success:t=>{this.fs.saveFile({tempFilePath:t.tempFilePath,filePath:this.localPath+"/"+this.entryFileName,success:t=>{this.fs.readFile({filePath:t.savedFilePath,encoding:"utf-8",success:async t=>{this.assetList=JSON.parse(t.data);let e=0;const r=this.assetList.length;for(const t of this.assetList)await this._syncLocalFile(t.filename,t.md5),"function"==typeof this.onSyncProgress&&this.onSyncProgress(t.filename,++e/r);"function"==typeof this.onSyncComplete&&this.onSyncComplete()},fail:console.error})},fail:console.error})},fail:console.error})}addTexture(t,e){return this.resources.push({id:t.trim().length>0?t.trim():e.trim(),file:e.trim(),type:a.RES_TYPE_TEXTURE}),this}addSpriteSheet(t,e){return this.resources.push({id:t,file:e.trim(),type:a.RES_TYPE_SPRITE_SHEET}),this}addFont(t,e){return this.resources.push({id:t,file:e.trim(),type:a.RES_TYPE_FONT}),this}_getFilePath(t){let e=t;try{this.fs.accessSync(e)}catch(r){e=this.localPath+"/"+t}try{this.fs.accessSync(e)}catch(e){return"function"==typeof this.onLoadError&&this.onLoadError(t,"resource file does not found"),!1}return e}async _loadBaseTexture(t){const e=this._getFilePath(t);return!!e&&new Promise(t=>{const r=wx.createImage();r.src=e,r.onload=(()=>t(new n.BaseTexture(r)))})}async loadTexture(t,e){const r=await this._loadBaseTexture(e);return!!r&&((new n.Texture).addToCache(r,t),!0)}async loadSpritesheet(t,e){const r=this._getFilePath(t),s=this._loadBaseTexture(e);return!(!r||!s)&&await new Promise(t=>{new n.Spritesheet(s,JSON.parse(this.fs.readFileSync(r,"utf-8"))).parse(t)})}async load(t){"function"==typeof t&&(this.onLoadComplete=t);const e=this.resources.length;let r=0;for(let t=0;t<this.resources.length;t++){const n=this.resources[t];n.type===a.RES_TYPE_TEXTURE?await this.loadTexture(n.id,n.url):n.type===a.RES_TYPE_SPRITE_SHEET?await this.loadSpritesheet(n.id,n.url):n.type===a.RES_TYPE_FONT&&await this.loadFont(n.id,n.url),"function"==typeof this.onLoadProgress&&this.onLoadProgress(n,++r/e)}"function"==typeof this.onLoadComplete&&this.onLoadComplete()}}o(a,"RES_TYPE_TEXTURE",0),o(a,"RES_TYPE_SPRITE_SHEET",1),o(a,"RES_TYPE_FONT",2);e.default=a}]);
//# sourceMappingURL=weapp-pixi-loader.js.map